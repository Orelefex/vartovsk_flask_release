<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meteostart.ru - –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—è</title>
    <meta name="description" content="–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ METAR, TAF, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—É—Ä—Å–∞—Ö –í–ü–ü">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="/">
                    <span class="logo-text">Meteostart.ru</span>
                </a>
            </div>

            <button class="nav-toggle" id="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <ul class="nav-menu" id="nav-menu">
                <li class="nav-item">
                    <a href="/" class="nav-link active">
                        METAR/TAF
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/aero" class="nav-link">
                        –ê—ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <header>
            <div class="header-logo">
                <span class="logo-icon"></span>
                <h1>METAR/TAF –î–µ–∫–æ–¥–µ—Ä</h1>
            </div>
            <p class="subtitle">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∞–≤–∏–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ç–µ–æ—Å–≤–æ–¥–æ–∫</p>
        </header>

        <main>
            <!-- –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ ICAO -->
            <div id="auto-fetch-section" class="input-section">
                <label for="icao-search">–ü–æ–∏—Å–∫ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞ –ø–æ –∫–æ–¥—É ICAO –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é:</label>
                <div class="search-container">
                    <input
                        type="text"
                        id="icao-search"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ ICAO –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä: UUEE) –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞"
                        autocomplete="off"
                    >
                    <div id="search-results" class="search-results"></div>
                </div>

                <!-- –í—ã–±—Ä–∞–Ω–Ω—ã–µ –∞—ç—Ä–æ–ø–æ—Ä—Ç—ã -->
                <div id="selected-airports" class="selected-airports" style="display: none; margin-top: 15px;">
                    <label style="margin-bottom: 8px; display: block;">–í—ã–±—Ä–∞–Ω–Ω—ã–µ –∞—ç—Ä–æ–ø–æ—Ä—Ç—ã:</label>
                    <div id="airports-list" class="airports-list"></div>
                </div>

                <div class="button-group">
                    <button id="fetch-btn" class="btn btn-primary">–ó–∞–≥—Ä—É–∑–∏—Ç—å METAR/TAF</button>
                    <button id="clear-btn" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>

                <div id="fetch-info" class="info-box" style="display: none;">
                    <p><strong>–ê—ç—Ä–æ–ø–æ—Ä—Ç:</strong> <span id="airport-name"></span></p>
                    <p><strong>ICAO:</strong> <span id="airport-icao"></span></p>
                    <p id="runway-info" style="display: none;"><strong>üõ´ –ö—É—Ä—Å—ã –í–ü–ü:</strong> <span id="runway-headings"></span></p>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
                <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
                    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—Ä–µ–º–µ–Ω–∏ -->
                    <div class="info-box" style="flex: 1; min-width: 250px; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); border: none; color: white;">
                        <label style="display: flex; align-items: center; gap: 10px; font-weight: 500; cursor: pointer;">
                            <input type="checkbox" id="local-time-toggle" style="width: 20px; height: 20px; cursor: pointer;">
                            <span> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–µ—Å—Ç–Ω–æ–µ –≤—Ä–µ–º—è</span>
                        </label>
                    </div>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è -->
                <div id="auto-refresh-panel" class="info-box" style="display: none; margin-top: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white;">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <label style="display: flex; align-items: center; gap: 8px; font-weight: 500; cursor: pointer;">
                                <input type="checkbox" id="auto-refresh-toggle" style="width: 20px; height: 20px; cursor: pointer;">
                                <span>–û–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç)</span>
                            </label>
                        </div>
                        <div id="auto-refresh-status" style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                            <span id="refresh-timer">‚è∏ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ...</p>
            </div>

            <div id="error-message" class="error-message" style="display: none;"></div>

            <!-- METAR —Å–µ–∫—Ü–∏—è (—Å–≤–µ—Ä—Ö—É) -->
            <div id="result-section" class="result-section" style="display: none;">
                <h2>METAR - –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–≤–æ–¥–∫–∞</h2>

                <div class="result-card">
                    <div id="metar-table"></div>
                </div>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è METAR -->
            <div id="metar-history-section" class="result-section" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 METAR/SPECI</h2>
                    <button id="archive-btn" class="btn btn-secondary btn-small">–ê—Ä—Ö–∏–≤ METAR/TAF</button>
                </div>

                <div class="result-card">
                    <div id="metar-history-table"></div>
                </div>
            </div>

            <!-- TAF —Å–µ–∫—Ü–∏—è (—Å–Ω–∏–∑—É) -->
            <div id="taf-section" class="taf-section" style="display: none;">
                <h2>TAF - –ü–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑</h2>
                <div class="result-card">
                    <pre id="taf-raw"></pre>
                </div>
            </div>

            <div id="taf-decoded-section" class="result-section" style="display: none;">
                <h2>TAF - –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∞</h2>
                <div class="result-card">
                    <pre id="taf-decoded-output"></pre>
                </div>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è TAF -->
            <div id="taf-history-section" class="result-section" style="display: none;">
                <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 TAF</h2>

                <div class="result-card">
                    <div id="taf-history-table"></div>
                </div>
            </div>
        </main>

        <footer>
            <p><strong>Meteostart.ru</strong> - –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—è</p>
            <p class="sources">–ò—Å—Ç–æ—á–Ω–∏–∫–∏: avia-meteo.ru, ogimet.com</p>
        </footer>
    </div>

    <script>
        // Mobile navigation toggle
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');

        navToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
            navToggle.classList.toggle('active');
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const isClickInside = navMenu.contains(event.target) || navToggle.contains(event.target);
            if (!isClickInside && navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
                navToggle.classList.remove('active');
            }
        });
    </script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
